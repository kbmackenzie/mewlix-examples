from dice.parser takes Parser
takes std.console

🐱 input_loop(input)
  watch
    mew parser!!! = new Parser(input)
    mew expr = parser.parse()
    bring expr
  pounce on error
    pounce when error.id == std.error.CatOnComputer; rethrow; ~meow
    bring 'Error: ' .. error.message
  ~meow
~meow

do console.name <- 'dice roller'
do console.run  <- input_loop, 🐈 () -> 'What should we roll?'
